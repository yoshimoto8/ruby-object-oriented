# 変更がかんたんな設計を作る

変更がかんたんな定義

1. 変更したら副作用がない
2. 要件の変更が小さければ、コードの変更も小さい
3. 既存のコードは再利用が可能
4. 最もかんたんな変更方法はコードを追加すること handleComplete

上記が「変更がかんたんな定義」だとすれば、コードは以下のように性質が伴うべきです。

1. Transparet(見通しが良い）: コードの変更の影響度が明白である
2. Reasonable(合理的): 変更と伴うコストが利益に繋がる
3. Usable(利用性が高い): 再利用ができる
4. Exeamplary(模範的): 新しく変更を加える人が、上記の品質に伴ったコードが書けるような環境になっている

Transparet,Reasonable,Usable,Exeamplary なコードを書くためには、それぞれのクラスが明確に定義された単一の責任を持つように徹底しなければならない。

## 単一承認クラスを作る

```ruby
class Trip
  attr_reader :price, :tax
  def initialize(price, tax)
    @price = price
    @tax = tax
  end

  def trip_price
    price * tax
  end
end


p Trip.new(3000, 1.08).trip_price
p Trip.new(5000, 1.08).trip_price
```

## なぜ単一責任が重要なのか？

単一責任はなぜ必要なんかから説明していきます。なぜ必要かと言うと先ほど説明した「Transparet」「Reasonable」「Usable」「Exeamplary」を実現させるため

特に「Usable」変更が  かんたんなアプリケーションを  実装するためです。変更がかんたんなアプリケーションとは、再利用がかんたんなクラスから構成されています。再利用がかんたんとは、着脱可能なユニットです。

明確に定義された振る舞いから成り、 周りとの依存関係はわずかしかありません。

その一方２つ以上の責任を持つクラスは、かんたんには再利用することが難しいです。

## どうやって単一責任かどうか見極めるのか？

1. あたかもそれに知覚があるかのように仮定して問いただす
2. クラスを 1 文で説明してみる。

## 変更を歓迎するコードを書く

振る舞いはメソットに捉えられているので、メッセージを送ることによって  実行することができる。単一責任のクラスを作ることによって、どんな振る舞いも一箇所のみ存在することになり、変更があってもただ一箇所コードを変更すればいいだけになります。

振る舞いに加えて  オブジェクトはデータを持ちます。例えば任意のデータがインスタンス変数内に保持されます。

インスタンス変数にアクセスする方法は２つあります。一つ目はインスタンス変数を直接参照する方法。２つ目はインスタンス変数をアクセッサメソットで包み隠す方法。

```ruby
class Trip
  def initialize(price, tax)
    @price = price
    @tax = tax
  end

  def trip_price
    @price * @tax
  end
end
```

## インスタンス変数の隠蔽

## データ構造の隠蔽

## 単一責任にする

## 参照

[オブジェクト思考設計ガイド](https://www.amazon.co.jp/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E8%A8%AD%E8%A8%88%E5%AE%9F%E8%B7%B5%E3%82%AC%E3%82%A4%E3%83%89-%EF%BD%9ERuby%E3%81%A7%E3%82%8F%E3%81%8B%E3%82%8B-%E9%80%B2%E5%8C%96%E3%81%97%E3%81%A4%E3%81%A5%E3%81%91%E3%82%8B%E6%9F%94%E8%BB%9F%E3%81%AA%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E8%82%B2%E3%81%A6%E6%96%B9-Sandi-Metz-ebook/dp/B01L8SEVYI/ref=sr_1_1?ie=UTF8&qid=1534550680&sr=8-1&keywords=%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E8%A8%AD%E8%A8%88%E3%82%AC%E3%82%A4%E3%83%89)
